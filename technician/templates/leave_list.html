{% extends 'base.html' %}
{% block navcontent %}
  {% if request.user.is_authenticated %}
    {% if request.user.is_superuser %}
      {% include 'dashboard/admin.html' %}
    {% elif request.user.department.department_name == "technician" %}
      {% include 'dashboard/technician.html' %}
    {% endif %}
  {% endif %}
{% endblock %}
{% block content %}
<div class="max-w-3xl mx-auto p-4">
  <h2 class="text-xl font-bold mb-4">My Leave Requests</h2>

  <table class="w-full border">
    <thead class="bg-gray-200">
      <tr>
        <th class="p-2">From</th>
        <th class="p-2">To</th>
        <th class="p-2">Type</th>
        <th class="p-2">Reason</th>
        <th class="p-2">Status</th>
      </tr>
    </thead>
    <tbody>
      {% for leave in leaves %}
      <tr class="border-t text-sm text-gray-800">
        <td class="p-2">{{ leave.start_date }}</td>
        <td class="p-2">{{ leave.end_date }}</td>
        <td class="p-2">{{ leave.leave_type }}</td>
        <td class="p-2">{{ leave.reason }}</td>
        <td class="p-2 font-medium {% if leave.status == 'approved' %}text-green-600{% elif leave.status == 'rejected' %}text-red-600{% else %}text-yellow-600{% endif %}">
          {{ leave.status|capfirst }}
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="5" class="p-2 text-center">No leave records.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}

