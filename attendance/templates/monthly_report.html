{% extends 'base.html' %}
{% block title %}Attendance Report - {{ user.get_full_name }}{% endblock %}

{% block navcontent %}
        {% if request.user.is_authenticated %}
  {% if request.user.is_superuser %}
    {% include 'dashboard/admin.html' %}
  {% elif request.user.department %}
    {% if request.user.department.department_name|lower == "hr" %}
      {% include 'dashboard/hr.html' %}
    {% endif %}
  {% endif %}
{% endif %}
{% endblock %}

{% block content %}

<h2 class="text-xl font-bold mb-2">Attendance Report for {{ user.get_full_name }}</h2>

<form method="get" class="flex flex-wrap gap-4 mb-4">
  <input type="number" name="month" value="{{ month }}" min="1" max="12" class="border px-3 py-2 rounded-md w-24" placeholder="Month">
  <input type="number" name="year" value="{{ year }}" class="border px-3 py-2 rounded-md w-32" placeholder="Year">
  <button class="bg-blue-700 text-white px-4 py-2 rounded-md">Load</button>
</form>

<div class="grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6">
  <div class="bg-green-100 p-4 rounded-xl text-center"><strong>Present:</strong> {{ summary.present }}</div>
  <div class="bg-red-100 p-4 rounded-xl text-center"><strong>Absent:</strong> {{ summary.absent }}</div>
  <div class="bg-yellow-100 p-4 rounded-xl text-center"><strong>Leave:</strong> {{ summary.leave }}</div>
  <div class="bg-gray-100 p-4 rounded-xl text-center"><strong>Half Day:</strong> {{ summary.half }}</div>
</div>

<div class="overflow-x-auto">
  <table class="min-w-full bg-white rounded-xl shadow-md">
    <thead>
      <tr class="bg-gray-100">
        <th class="p-3">Date</th>
        <th class="p-3">Status</th>
        <th class="p-3">Remarks</th>
      </tr>
    </thead>
    <tbody>
      {% for rec in records %}
      <tr class="border-t">
        <td class="p-3 text-center">{{ rec.date }}</td>
        <td class="p-3 capitalize text-center">{{ rec.get_status_display }}</td>
        <td class="p-3 text-center">{{ rec.remarks }}</td>
      </tr>
      {% empty %}
        <tr><td colspan="3" class="p-4 text-center">No attendance for this month.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% endblock %}

